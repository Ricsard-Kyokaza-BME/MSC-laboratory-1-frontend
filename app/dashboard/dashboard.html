<div class="dashboard-project-container dashboard-grey-box container-fluid">
  <div class="row dashboard-project-title">
    <div class="col-1">
      <i class="material-icons" (click)="dashboardToggle()">list</i>
    </div>
    <div class="col-11 col-lg-8 dashboard-project-title-text" (click)="dashboardToggle()">
      <h4 class="max-1-lines" [title]="project.name | capitalize">{{project.name | capitalize}}</h4>
      <h6 class="max-2-lines" [title]="project.description | capitalize">{{project.description | capitalize}}</h6>
    </div>
    <div class="item-create-button col-12 col-lg-3 text-center text-lg-right mt-3 mt-lg-0">
      <button class="btn btn-outline-primary btn-sm" (click)="goToCreateBacklogItem()"><i class="material-icons">add</i> <span>Backlog item</span></button>
    </div>
  </div>
  <div class="row dashboard-col-container" *ngIf="isOpen" [@fadeInOut]>
    <div class="dashboard-container container-white col-10 offset-1 col-md-5 offset-md-1 col-lg-3 offset-lg-0">
      <div>
        <span>Backlog Items</span>
        <div class="switch">
          <label>
            Change order
          </label>
          <ui-switch [(ngModel)]="orderSwitches.backlogSwitch"
                     [disabled]="!(sessionService.isProductOwnerSignedIn()) || backlogItems.length == 0"
                     color="#3B70A6"></ui-switch>
        </div>
      </div>
      <ul *ngIf="!orderSwitches.backlogSwitch" class="collection"
          dnd-droppable (onDropSuccess)="dropToBacklog($event)" [dropZones]="['demo1']">
        <li class="dashboard-container-item empty-item" (click)="goToCreateBacklogItem()"
            *ngIf="backlogItems.length == 0">
          Create a new item, or drag'n'drop one
        </li>
        <li class="dashboard-container-item"
            *ngFor="let item of backlogItems"
            dnd-draggable [dragEnabled]="item" [dragData]="item" [dropZones]="['demo2']"
            (onDragSuccess)="removeBacklogItem($event)"
            (click)="dashboardItemClicked(item)">
          <div class="dashboard-container-item-type">{{item.type.substring(0,4)}}</div>
          {{item.title}}
        </li>
      </ul>

      <ul *ngIf="orderSwitches.backlogSwitch" class="collection"
          dnd-sortable-container [sortableData]="backlogItems">
        <li class="dashboard-container-item"
            *ngFor="let item of backlogItems; let i = index"
            [dragData]="item"
            dnd-sortable [sortableIndex]="i">
          {{item.title}}
        </li>
      </ul>
    </div>

    <div class="dashboard-container container-red col-10 offset-1 col-md-5 offset-md-0 col-lg-3 offset-lg-0">
      <div>
        <span>Todo</span>
        <div class="switch">
          <label>
            Change order
          </label>
          <ui-switch [(ngModel)]="orderSwitches.todoSwitch"
                     [disabled]="orderSwitchesDisabled.todoSwitch || todoItems.length == 0"
                     color="#3B70A6"></ui-switch>
        </div>
      </div>
      <ul *ngIf="!orderSwitches.todoSwitch" class="collection"
          dnd-droppable (onDropSuccess)="dropToTodo($event)" [dropZones]="['demo2']">
        <li class="dashboard-container-item empty-item" (click)="goToCreateBacklogItem()"
            *ngIf="todoItems.length == 0">
          Create a new item, or drag'n'drop one
        </li>
        <li class="dashboard-container-item"
            *ngFor="let item of todoItems"
            dnd-draggable [dragEnabled]="item" [dragData]="item" [dropZones]="['demo1', 'demo3']"
            (onDragSuccess)="removeTodoItem($event)"
            (click)="dashboardItemClicked(item)">
          <div class="dashboard-container-item-type">{{item.type.substring(0,4)}}</div>
          {{item.title}}
        </li>
      </ul>

      <ul *ngIf="orderSwitches.todoSwitch" class="collection"
          dnd-sortable-container [sortableData]="todoItems">
        <li class="dashboard-container-item"
            *ngFor="let item of todoItems; let i = index"
            [dragData]="item"
            dnd-sortable [sortableIndex]="i">
          {{item.title}}
        </li>
      </ul>
    </div>

    <div class="dashboard-container container-yellow col-10 offset-1 col-md-5 offset-md-1 col-lg-3 offset-lg-0">
      <div>
        <span>In Progress</span>
        <div class="switch">
          <label>
            Change order
          </label>
          <ui-switch [(ngModel)]="orderSwitches.inProgressSwitch"
                     [disabled]="orderSwitchesDisabled.inProgressSwitch || inProgressItems.length == 0"
                     color="#3B70A6"></ui-switch>
        </div>
      </div>
      <ul *ngIf="!orderSwitches.inProgressSwitch" class="collection"
          dnd-droppable (onDropSuccess)="dropToInProgress($event)" [dropZones]="['demo3']">
        <li class="dashboard-container-item empty-item" (click)="goToCreateBacklogItem()"
            *ngIf="inProgressItems.length == 0">
          Create a new item, or drag'n'drop one
        </li>
        <li class="dashboard-container-item"
            *ngFor='let item of inProgressItems'
            dnd-draggable [dragEnabled]="item" [dragData]="item" [dropZones]="['demo2', 'demo4']"
            (onDragSuccess)="removeInProgressItem($event)"
            (click)="dashboardItemClicked(item)">
          <div class="dashboard-container-item-type">{{item.type.substring(0,4)}}</div>
          {{item.title}}
        </li>
      </ul>

      <ul *ngIf="orderSwitches.inProgressSwitch" class="collection"
          dnd-sortable-container [sortableData]="inProgressItems">
        <li class="dashboard-container-item"
            *ngFor="let item of inProgressItems; let i = index"
            [dragData]="item"
            dnd-sortable [sortableIndex]="i">
          {{item.title}}
        </li>
      </ul>
    </div>

    <div class="dashboard-container container-green col-10 offset-1 col-md-5 offset-md-0 col-lg-3 offset-lg-0">
      <div>
        <span>Done</span>
        <div class="switch">
          <label>
            Change order
          </label>
          <ui-switch [(ngModel)]="orderSwitches.doneSwitch"
                     [disabled]="orderSwitchesDisabled.doneSwitch || doneItems.length == 0"
                     color="#3B70A6"></ui-switch>
        </div>
      </div>
      <ul *ngIf="!orderSwitches.doneSwitch" class="collection"
          dnd-droppable (onDropSuccess)="dropToDone($event)" [dropZones]="['demo4']">
        <li class="dashboard-container-item empty-item" (click)="goToCreateBacklogItem()"
            *ngIf="doneItems.length == 0">
          Create a new item, or drag'n'drop one
        </li>
        <li class="dashboard-container-item"
            *ngFor='let item of doneItems'
            dnd-draggable [dragEnabled]="item" [dragData]="item" [dropZones]="['demo3']"
            (onDragSuccess)="removeDoneItem($event)"
            (click)="dashboardItemClicked(item)">
          <div class="dashboard-container-item-type">{{item.type.substring(0,4)}}</div>
          {{item.title}}
        </li>
      </ul>

      <ul *ngIf="orderSwitches.doneSwitch" class="collection"
          dnd-sortable-container [sortableData]="doneItems">
        <li class="dashboard-container-item"
            *ngFor="let item of doneItems; let i = index"
            [dragData]="item"
            dnd-sortable [sortableIndex]="i">
          {{item.title}}
        </li>
      </ul>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <span><i class="material-icons">delete</i></span>
        </div>
      </div>
    </div>

  </div>
</div>
